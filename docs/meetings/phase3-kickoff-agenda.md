# Phase 3: BOM Excel Import 킥오프 미팅

**일시:** 2025-10-07 (월) 14:00 - 15:30 (90분)  
**장소:** 회의실 / Zoom  
**참석자:**

- Product Manager (PM)
- Dev Lead (Backend)
- Frontend Developer
- QA Lead
- UX Designer

---

## 📋 Agenda

### 1. Phase 2 회고 및 Phase 3 목표 (15분)

#### Phase 2 성과

- ✅ BOM 구성품 추가 기능 배포 완료
- ✅ RBAC 권한 체크 적용
- ✅ 성공률 96.7% (목표 95% 달성)
- ✅ p95 응답시간 234ms (목표 300ms 이하)

#### Phase 2 학습사항

- 🔍 중복 구성품 추가 시도 증가 (UX 개선 필요)
- 🔍 순환 참조 체크는 Phase 2.1로 연기
- 🔍 Excel Import 요청 증가 → Phase 3로 우선순위 상향

#### Phase 3 목표

- 🎯 **비즈니스 가치:** 100개 구성품 등록 시간 60분 → 10분 (83% 단축)
- 🎯 **사용자 만족도:** 현장 작업 효율 극대화
- 🎯 **기술 목표:** 대량 데이터 처리 안정성 검증

---

### 2. PRD 리뷰 및 미결정 사항 결정 (30분)

#### 📄 PRD 요약

- **파일:** `docs/features/phase3-excel-import-prd.md`
- **핵심 기능:**
  1. Excel 파일 업로드 (.xlsx, .xls)
  2. 미리보기 및 3단계 검증 (형식 → 데이터 → 비즈니스)
  3. 에러 리포트 다운로드
  4. 부분 성공 허용
  5. 감사 로그

#### 🔑 미결정 사항 (결정 필요!)

##### **결정 #1: 코드 기준**

| 옵션            | 장점                 | 단점                       | 투표 |
| --------------- | -------------------- | -------------------------- | ---- |
| **A. SKU 코드** | 현장 편의성↑, 직관적 | 코드 중복 시 애매함        | [ ]  |
| B. UUID         | 유일성 보장          | 사용자가 UUID 모를 수 있음 | [ ]  |

**권장:** 옵션 A (SKU 코드) - 현장 작업 효율 우선

---

##### **결정 #2: 부분 성공 정책**

| 옵션                  | 장점                           | 단점             | 투표 |
| --------------------- | ------------------------------ | ---------------- | ---- |
| A. 전체 성공/실패     | 데이터 일관성 보장             | 재작업 시간↑     | [ ]  |
| **B. 부분 성공 허용** | 효율성↑, 에러 수정 후 재업로드 | 정합성 주의 필요 | [ ]  |

**권장:** 옵션 B (부분 성공) - 대량 입력 시 실용성

---

##### **결정 #3: 버전 스냅샷**

| 옵션                    | 장점                     | 단점        | 투표 |
| ----------------------- | ------------------------ | ----------- | ---- |
| **A. 즉시 반영**        | 간단함, 빠른 적용        | 롤백 어려움 | [ ]  |
| B. Draft 버전 (Phase 4) | 안전성↑, 승인 워크플로우 | 복잡도↑     | [ ]  |

**권장:** 옵션 A (즉시 반영) - Phase 3는 MVP, Phase 4에서 버전 관리

---

##### **결정 #4: 중복 행 처리**

| 옵션                 | 설명               | 투표 |
| -------------------- | ------------------ | ---- |
| A. 첫 번째 행만 반영 | 기본 동작          | [ ]  |
| **B. 수량 합산**     | 1 EA + 1 EA = 2 EA | [ ]  |
| C. 사용자 선택       | 모달로 선택지 제공 | [ ]  |

**권장:** 옵션 A (첫 번째 행) - Phase 3.1, 옵션 B는 Phase 3.2

---

##### **결정 #5: 기존 구성품 처리**

| 옵션               | 설명                 | 투표 |
| ------------------ | -------------------- | ---- |
| **A. Skip (에러)** | 이미 존재하면 에러   | [ ]  |
| B. 수량 업데이트   | 새 수량으로 덮어쓰기 | [ ]  |
| C. 사용자 선택     | 모달로 선택지 제공   | [ ]  |

**권장:** 옵션 A (Skip) - Phase 3.1, 옵션 B는 Phase 3.2

---

#### ✅ 결정 타임 (10분)

- 각 결정사항에 대해 투표
- 찬성/반대 의견 청취
- 최종 결정 기록

---

### 3. 기술 아키텍처 리뷰 (20분)

#### 프론트엔드 설계

- **라이브러리:** `xlsx` (SheetJS), `react-dropzone`
- **UI 플로우:**
  1. 파일 업로드 모달
  2. 미리보기 (요약 통계)
  3. 검증 결과 (성공/에러/경고)
  4. 확정 모달
- **상태 관리:** React Query + Local State

#### 백엔드 설계

- **엔드포인트:** `POST /api/v1/items/bom/import`
- **파일 처리:** Python `openpyxl` 라이브러리
- **검증 로직:**
  ```python
  1. 파일 파싱 → pandas DataFrame
  2. 형식 검증 (필수 컬럼, 타입)
  3. 데이터 검증 (존재 여부, 중복, 순환)
  4. 비즈니스 규칙 (권장사항)
  5. 검증 결과 반환 (JSON)
  ```
- **트랜잭션:** 유효한 행만 일괄 INSERT

#### 데이터베이스

- **임시 테이블:** `bom_import_sessions`

  ```sql
  CREATE TABLE bom_import_sessions (
    id UUID PRIMARY KEY,
    user_id UUID NOT NULL,
    filename TEXT NOT NULL,
    total_rows INT NOT NULL,
    valid_rows INT,
    error_rows INT,
    status TEXT, -- 'pending', 'completed', 'failed'
    created_at TIMESTAMP DEFAULT NOW()
  );
  ```

- **감사 로그:** `bom_import_logs`
  ```sql
  CREATE TABLE bom_import_logs (
    id UUID PRIMARY KEY,
    session_id UUID REFERENCES bom_import_sessions(id),
    user_id UUID NOT NULL,
    action TEXT, -- 'import_started', 'import_committed'
    success_count INT,
    error_count INT,
    created_at TIMESTAMP DEFAULT NOW()
  );
  ```

#### 성능 목표

| 지표        | 목표                | 예상 도전과제         |
| ----------- | ------------------- | --------------------- |
| 파일 업로드 | < 3초 (10MB)        | 네트워크 속도         |
| 파싱        | < 2초 (1,000 rows)  | Python openpyxl 성능  |
| 검증        | < 5초 (1,000 rows)  | 순환 참조 체크 (재귀) |
| 확정        | < 10초 (1,000 rows) | DB 일괄 INSERT        |

---

### 4. Sprint 계획 및 역할 분담 (15분)

#### Week 1: 기반 작업

| Day | 작업                 | 담당자       | 산출물              |
| --- | -------------------- | ------------ | ------------------- |
| 1-2 | 프론트엔드 업로드 UI | Frontend Dev | 파일 선택/Drag&Drop |
| 1-2 | 백엔드 파싱 로직     | Backend Dev  | Excel → DataFrame   |
| 3-4 | 검증 로직 (형식)     | Backend Dev  | Level 1 검증        |
| 3-4 | 미리보기 UI          | Frontend Dev | 요약 통계 표시      |
| 5   | 통합 테스트          | QA Lead      | E2E 시나리오 1      |

#### Week 2: 고도화 및 QA

| Day | 작업               | 담당자       | 산출물         |
| --- | ------------------ | ------------ | -------------- |
| 6-7 | 검증 로직 (데이터) | Backend Dev  | Level 2/3 검증 |
| 6-7 | 검증 결과 UI       | Frontend Dev | 에러 리포트    |
| 8-9 | 부분 성공 로직     | Backend Dev  | 트랜잭션 처리  |
| 8-9 | 확정 모달          | Frontend Dev | 확인 UI        |
| 10  | E2E 테스트         | QA Lead      | 전체 시나리오  |

#### 예상 공수

- **Frontend:** 1 FTE × 2주 = 10일
- **Backend:** 1 FTE × 2주 = 10일
- **QA:** 0.5 FTE × 2주 = 5일
- **총:** 2.5 FTE × 2주

---

### 5. 리스크 및 의존성 (5분)

#### 주요 리스크

| 리스크                     | 영향도 | 완화 방안                          |
| -------------------------- | ------ | ---------------------------------- |
| 순환 참조 체크 성능 저하   | High   | 최대 깊이 제한 (10), 인덱스 최적화 |
| 대용량 파일 처리 시간 초과 | Medium | 진행 바 표시, 비동기 처리 검토     |
| Excel 형식 호환성 문제     | Low    | 템플릿 제공, CSV 대안              |

#### 의존성

- [ ] Phase 2 안정화 (1주일 운영)
- [ ] Supabase 테이블 스키마 확정
- [ ] UI 목업 승인 (Designer)

---

### 6. QA 전략 및 성공 기준 (5분)

#### 테스트 시나리오

1. **TS-1:** 정상 플로우 (10 rows, 모두 유효)
2. **TS-2:** 부분 성공 (7 유효, 3 에러)
3. **TS-3:** 순환 참조 감지
4. **TS-4:** 중복 행 처리
5. **TS-5:** 대량 데이터 (1,000 rows)

#### 성공 기준

- [ ] E2E 시나리오 5개 모두 Pass
- [ ] 1,000 rows Import < 20초
- [ ] 에러 리포트 정확도 100%
- [ ] 사용자 피드백 만족도 ≥ 80%

---

### 7. Q&A 및 Next Steps (10분)

#### 즉시 실행 항목

1. [ ] 미결정 사항 5개 결정 완료
2. [ ] DB 테이블 스키마 생성
3. [ ] UI 목업 초안 작성 (Designer)
4. [ ] Sprint Backlog 생성 (Jira/Trello)

#### 다음 미팅

- **일시:** 2025-10-09 (수) 10:00 (Daily Standup 시작)
- **목표:** Sprint 1일차 진행 상황 공유

---

## 📊 부록: 의사결정 매트릭스

### 결정 우선순위

| 결정            | 중요도 | 긴급도 | 담당자        | 기한    |
| --------------- | ------ | ------ | ------------- | ------- |
| #1 코드 기준    | High   | High   | PM + Dev Lead | 오늘    |
| #2 부분 성공    | High   | High   | PM + QA       | 오늘    |
| #3 버전 스냅샷  | Medium | Low    | PM            | 오늘    |
| #4 중복 행 처리 | Medium | Medium | Dev Lead      | 이번 주 |
| #5 기존 구성품  | Medium | Medium | Dev Lead      | 이번 주 |

---

## ✅ 미팅 체크리스트

### 준비물

- [x] PRD 문서 (인쇄 또는 공유)
- [x] 아키텍처 다이어그램
- [ ] UI 목업 (Figma 링크)
- [x] Excel 템플릿 샘플
- [ ] Sprint Backlog 초안

### 미팅 후 To-Do

- [ ] 회의록 공유 (Notion/Wiki)
- [ ] 결정사항 PRD에 반영
- [ ] Sprint Backlog 최종 확정
- [ ] 팀원들에게 역할/일정 공지

---

**문서 버전:** v1.0  
**작성자:** Product Manager  
**최종 수정:** 2025-10-06
